---
title: "[Kubernetes] K8s vs K3s"
description: 
author: 이원모
date: 2024-09-01
categories: [DevOps, Kubernetes]
tags: [Kubernetes, 쿠버네티스, DevOps, 컨테이너 오케스트레이션, k8s, k3s]
pin: false
math: true
mermaid: true
image:
  path: /thumbnail/kubernetes-logo.png
  lqip: 
  alt: 
---

Kubernetes(흔히 K8s)는 현대 IT 인프라에서 필수적인 역할을 하는 도구입니다. 컨테이너화된 애플리케이션의 배포, 확장, 운영을 자동화하는 이 플랫폼은 대규모 인프라 환경에서 특히 빛을 발합니다. 수천 개의 노드와 수많은 컨테이너를 관리할 수 있는 K8s는 대기업이나 클라우드 서비스 제공자들에게 없어서는 안 될 존재입니다. 하지만 그 강력한 기능과 함께 복잡성과 높은 자원 요구 사항이 따라오기 때문에, 소규모 환경이나 리소스가 제한된 환경에서는 적합하지 않을 수 있습니다.

이러한 문제를 해결하기 위해 Rancher Labs는 K8s의 핵심 기능을 유지하면서도 불필요한 요소를 제거하고 가볍게하기 위한 경량화 버전 K3s를 개발했습니다. 이번 글에서는 K8s와 K3s 각 도구가 어떤 차이가 있는지 간략히 살펴보겠습니다.

## 설계 목적과 대상 환경
---
K8s는 처음부터 대규모 클러스터 환경을 염두에 두고 설계되었습니다. 수백에서 수천 개의 노드를 관리하며, 대규모 분산 애플리케이션을 운영하는 데 필요한 모든 기능을 제공합니다. 이로 인해 대기업의 데이터센터나 클라우드 서비스 환경에서 특히 유용하며, 복잡한 애플리케이션의 자동화된 배포와 확장을 가능하게 합니다.

반면, K3s는 K8s의 이러한 복잡성과 자원 요구를 경감시키기 위해 개발되었습니다. K3s는 리소스가 제한된 환경에서도 Kubernetes를 사용할 수 있도록 설계되었으며, 특히 IoT(사물인터넷) 디바이스나 엣지 컴퓨팅 환경에서 유용합니다. K3s는 작은 클러스터나 단일 노드 환경에서 효율적으로 운영될 수 있도록 설계되었기 때문에, 소규모 스타트업, 로컬 개발 환경, 또는 자원이 부족한 환경에서 많이 사용됩니다.

<br>

## 구성 요소와 아키텍처
---
K8s는 다양한 구성 요소들로 이루어져 있으며, 이들이 모두 조화롭게 작동하여 클러스터를 운영합니다. 기본적으로 etcd, kube-apiserver, kube-controller-manager, kube-scheduler, kubelet, kube-proxy 등 여러 컴포넌트로 구성됩니다. 이 구성 요소들은 각각 중요한 역할을 하며, 클러스터의 고가용성, 데이터 일관성, 그리고 복구 능력을 보장합니다. 그러나 이러한 복잡한 구조는 설치와 관리에 있어 높은 수준의 전문 지식을 요구합니다.

K3s는 K8s의 복잡한 구성 요소를 단순화하여 단일 바이너리로 통합했습니다. K8s에서 중요한 역할을 하는 etcd 대신, K3s는 SQLite를 기본 데이터베이스로 사용합니다. SQLite는 가벼운 리소스 요구 사항을 가지고 있어, K3s가 경량화된 환경에서 더 적합하게 작동할 수 있도록 돕습니다. 물론 필요에 따라 외부 데이터베이스를 사용할 수도 있습니다. K3s는 또한 불필요한 알파 및 베타 기능, 그리고 오래된 인터페이스를 제거하여 경량화를 극대화했습니다.

<br>

## 리소스 요구 사항
---
K8s는 대규모 애플리케이션과 인프라를 지원하도록 설계된 만큼, 상당한 수준의 하드웨어 자원을 필요로 합니다. CPU, 메모리, 디스크 등 다양한 자원이 충분히 제공되어야만 K8s 클러스터가 원활하게 운영될 수 있습니다. 특히, 고가용성 클러스터를 구축하려면 각 구성 요소를 중복 배치하여 장애에 대비해야 하므로, 자원 소모가 더욱 커집니다.

반면, K3s는 이러한 자원 소모를 최소화하도록 설계되었습니다. K3s는 최소한의 하드웨어로도 운영할 수 있으며, 이는 Raspberry Pi와 같은 소형 디바이스에서도 작동할 수 있음을 의미합니다. K3s는 낮은 CPU와 메모리 환경에서도 K8s의 주요 기능을 제공하기 때문에, 자원이 제한된 환경에서 큰 장점이 됩니다. 이는 소규모 개발 팀이나, 테스트 환경을 구축하려는 개발자들에게 매우 유리한 선택입니다.

<br>

## 운영 및 유지보수
---
K8s는 강력한 기능을 제공하는 만큼, 그 운영과 유지보수도 복잡합니다. K8s 클러스터를 설치하고 관리하는 데는 상당한 수준의 전문 지식이 필요하며, 업그레이드, 확장, 모니터링 등의 작업도 쉽게 이루어지지 않습니다. 또한, 다양한 도구와 설정을 통해 클러스터를 관리해야 하기 때문에, 운영비용이 높을 수 있습니다. 이러한 복잡성은 대규모 환경에서는 필수적이지만, 소규모 환경에서는 과도할 수 있습니다.

K3s는 운영과 유지보수를 간소화하여, Kubernetes를 처음 사용하는 사람이나 복잡한 환경을 피하고자 하는 사람들에게 적합합니다. K3s는 설치와 유지보수가 매우 간단하며, 자동화된 설정을 통해 최소한의 노력으로 클러스터를 운영할 수 있습니다. 이는 특히 DevOps 환경에서 개발자들이 인프라 관리를 단순화하고, 애플리케이션 개발에 집중할 수 있게 해줍니다.

<br>

## 커뮤니티와 지원
---
K8s는 오픈소스 커뮤니티의 적극적인 지원을 받으며, 지속적으로 발전하고 있습니다. 수많은 개발자와 기업들이 K8s의 발전에 기여하고 있으며, 다양한 도구와 확장 기능들이 제공되고 있습니다. 이로 인해 K8s는 현재 가장 널리 사용되는 컨테이너 오케스트레이션 플랫폼 중 하나로 자리잡고 있습니다.

K3s 역시 오픈소스 프로젝트로, Rancher Labs에 의해 관리되고 있지만, K8s만큼 대규모 커뮤니티를 가지고 있지는 않습니다. 그러나 K3s는 그 경량성과 간단함 덕분에 빠르게 인기를 얻고 있으며, 특히 IoT와 엣지 컴퓨팅 분야에서 강력한 지지를 받고 있습니다. Rancher Labs는 K3s의 발전을 적극적으로 지원하고 있으며, 이를 통해 사용자는 안정적이고 지속적인 업데이트를 받을 수 있습니다.

<br>

## 설치 도구
---
K8s와 K3s를 설치할 수 있는 다양한 도구들이 있으며, 각 도구는 사용 환경과 목적에 맞게 선택할 수 있습니다. 아래는 K8s와 K3s를 설치할 수 있는 주요 도구들입니다.

#### K8s
- kubeadm

  kubeadm은 K8s 클러스터를 설치하고 부트스트랩하는 데 가장 널리 사용되는 도구입니다. 이 도구는 기본적인 클러스터 구성 요소를 자동으로 설치하고, 클러스터를 구축하는 데 필요한 초기 설정을 제공합니다.
  사용자가 직접 클러스터의 세부 설정을 제어할 수 있으며, 다양한 운영체제와 환경에서 사용 가능합니다.

- Kubespray

  Kubespray는 Ansible 플레이북과 Terraform을 기반으로 한 K8s 설치 도구입니다. 다양한 클라우드 제공자 및 베어메탈 환경에서 K8s 클러스터를 프로비저닝하고 관리할 수 있습니다.
  멀티 클라우드 지원, 커스터마이징 가능, 고급 사용자를 위한 다양한 설정 옵션을 제공하고 고가용성(HA) 클러스터 구성을 지원합니다.

- Minikube

  Minikube는 로컬 환경에서 단일 노드 K8s 클러스터를 실행할 수 있게 해주는 도구입니다. 주로 개발자들이 개인 컴퓨터에서 Kubernetes 환경을 테스트하는 데 사용됩니다.
  간단한 설치 및 실행이 가능하고 다양한 드라이버를 지원하며, 로컬 개발 환경에 적합하다는 것이 특징입니다.
  
- Docker Desktop

  Docker Desktop은 Mac과 Windows에서 K8s 클러스터를 로컬로 실행할 수 있는 도구로, Docker와 함께 사용할 수 있습니다. 설정에서 Kubernetes를 활성화하면 로컬 클러스터를 쉽게 관리할 수 있습니다.
  Docker와의 통합, 개발자 친화적인 환경, 간편한 설정이 특징입니다.

- 관리형 Kubernetes 서비스(GKE, EKS, AKS)

  Google Kubernetes Engine(GKE), Amazon Elastic Kubernetes Service(EKS), Azure Kubernetes Service(AKS) 등 클라우드 제공자들이 관리형 Kubernetes 서비스를 제공합니다. 클러스터 운영과 유지보수를 클라우드 제공자가 담당하며, 사용자는 애플리케이션 배포와 관리에 집중할 수 있습니다. 자동화된 클러스터 관리, 높은 안정성, 클라우드 환경 최적화가 특징입니다.

<br>

#### K3s
- K3s 설치 스크립트

  K3s는 Rancher Labs에서 제공하는 간단한 설치 스크립트를 통해 쉽게 설치할 수 있습니다. 이 스크립트는 K3s를 자동으로 다운로드하고 시스템에 설치하며, 단일 노드 클러스터를 바로 사용할 수 있게 설정합니다.

- K3d

  K3d는 Docker 컨테이너 내에서 K3s 클러스터를 실행할 수 있게 해주는 도구입니다. 로컬 개발 환경에서 K3s를 테스트하거나 여러 클러스터를 쉽게 생성하고 제거할 수 있는 방법입니다.

- 수동 바이너리 설치

  K3s 바이너리를 직접 다운로드하여 수동으로 설치할 수 있습니다. 이 방법은 고급 사용자나 특정 커스터마이징이 필요한 경우에 유용합니다.

- 라즈베리 파이와 같은 소형 디바이스에 설치

  K3s는 경량화된 설계 덕분에 Raspberry Pi와 같은 ARM 기반 소형 디바이스에서도 원활하게 실행할 수 있습니다. 이는 IoT나 엣지 컴퓨팅 환경에서 Kubernetes를 운영하기에 적합합니다.
  소형 디바이스 지원, 저전력 환경에서의 안정적 운영, 경량화된 아키텍처가 특징입니다.
  
---

읽어주셔서 감사합니다. 😊 

__Reference__  
ChatGPT - OpenAI